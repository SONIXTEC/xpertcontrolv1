<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameHub | Módulo de Salas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #ef233c;
            --text: #2b2d42;
            --text-light: #8d99ae;
            --card-bg: #ffffff;
            --gaming-accent: #7209b7;
        }

        /* Estilos base (igual que en el dashboard) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--text);
        }

        .app-container {
            display: grid;
            grid-template-columns: 220px 1fr;
            min-height: 100vh;
        }

        /* Sidebar (igual que en el dashboard) */
        .sidebar {
            background-color: var(--card-bg);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            padding: 30px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
            border-right: 3px solid var(--primary);
        }

        .nav-link i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }

        /* Main Content - Módulo de Salas */
        .main-content {
            padding: 30px;
            background-color: #f5f7fa;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.9rem;
        }

        .btn-primary {
            background-color: var(--gaming-accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: #5a08a0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(114, 9, 183, 0.3);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--gaming-accent);
            color: var(--gaming-accent);
        }

        .btn-outline:hover {
            background-color: rgba(114, 9, 183, 0.1);
        }

        /* Filtros */
        .filters-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-label {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .filter-select {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            background-color: var(--card-bg);
            font-size: 0.9rem;
            min-width: 150px;
        }

        /* Consolas Grid */
        .consoles-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .console-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .console-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .console-header {
            padding: 15px;
            border-bottom: 1px solid #f1f3f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .console-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .console-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .ps-icon {
            background-color: #003791;
        }

        .xbox-icon {
            background-color: #107c10;
        }

        .switch-icon {
            background-color: #e60012;
        }

        .pc-icon {
            background-color: var(--text);
        }

        .console-status {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }

        .status-available {
            background-color: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }

        .status-busy {
            background-color: rgba(239, 35, 60, 0.1);
            color: var(--danger);
        }

        .status-reserved {
            background-color: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }

        .console-body {
            padding: 15px;
        }

        .console-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .info-label {
            color: var(--text-light);
        }

        .info-value {
            font-weight: 500;
        }

        .timer-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            margin: 15px 0;
        }

        .timer-display {
            font-size: 1.5rem;
            font-family: 'Courier New', monospace;
            font-weight: 700;
            color: var(--gaming-accent);
            margin-bottom: 5px;
        }

        .timer-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .console-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            padding: 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #e9ecef;
            background-color: white;
        }

        .action-btn:hover {
            background-color: #f8f9fa;
        }

        .action-btn.primary {
            background-color: var(--gaming-accent);
            color: white;
            border-color: var(--gaming-accent);
        }

        .action-btn.primary:hover {
            background-color: #5a08a0;
        }

        .action-btn.danger {
            background-color: rgba(239, 35, 60, 0.1);
            color: var(--danger);
            border-color: rgba(239, 35, 60, 0.2);
        }

        .action-btn.danger:hover {
            background-color: rgba(239, 35, 60, 0.2);
        }

        /* Modal de Inicio de Sesión */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: #ffffff;
            border-radius: 16px;
            width: 95%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(20px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #f1f3f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 0.5px;
        }

        .modal-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 50%;
            padding: 5px;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 25px;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            background: #f8f9fa;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.08);
        }

        .products-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #f1f3f5;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #f1f3f5;
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .product-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: rgba(114, 9, 183, 0.1);
            color: var(--gaming-accent);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background-color: var(--gaming-accent);
            color: white;
        }

        .modal-footer {
            padding: 15px 25px;
            border-top: 1px solid #f1f3f5;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            background: #f8f9fa;
            border-bottom-left-radius: 16px;
            border-bottom-right-radius: 16px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .consoles-container {
                grid-template-columns: 1fr;
            }
        }

        /* Estilos para el modal de facturación */
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #edf2f7;
        }
        
        .invoice-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            padding: 12px;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.1) 0%, rgba(58, 12, 163, 0.1) 100%);
            border-radius: 12px;
        }
        
        .invoice-logo i {
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .invoice-info {
            text-align: right;
            background: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            min-width: 200px;
        }
        
        .info-row {
            margin-bottom: 8px;
            font-size: 0.95rem;
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        
        .info-row:last-child {
            margin-bottom: 0;
        }
        
        .info-label {
            color: var(--text-light);
            font-weight: 500;
        }
        
        .info-value {
            font-weight: 600;
            color: var(--text);
        }
        
        .invoice-details {
            background: #ffffff;
            border: 1px solid #edf2f7;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .details-header {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            background: #f8fafc;
            font-weight: 600;
            color: var(--text);
            border-bottom: 1px solid #edf2f7;
        }
        
        .details-header span:last-child {
            text-align: right;
            min-width: 100px;
        }
        
        .details-body {
            padding: 0;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            border-bottom: 1px solid #edf2f7;
            transition: background-color 0.2s ease;
        }
        
        .detail-item:hover {
            background-color: #f8fafc;
        }
        
        .detail-item:last-child {
            border-bottom: none;
        }
        
        .detail-item span:last-child {
            font-weight: 600;
            color: var(--text);
            min-width: 100px;
            text-align: right;
        }
        
        .details-footer {
            padding: 15px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            color: #ffffff;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .payment-section {
            background: #ffffff;
            border: 1px solid #edf2f7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .payment-section h4 {
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .payment-section h4::before {
            content: '';
            display: block;
            width: 4px;
            height: 20px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        .payment-methods {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .payment-option:hover {
            background: rgba(67, 97, 238, 0.1);
        }
        
        .payment-option input[type="radio"] {
            accent-color: var(--primary);
            width: 16px;
            height: 16px;
        }
        
        .payment-option label {
            font-weight: 500;
            cursor: pointer;
        }
        
        .bank-select {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .success-message {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.1) 0%, rgba(58, 12, 163, 0.1) 100%);
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .success-message i {
            font-size: 3rem;
            color: #10b981;
            margin-bottom: 15px;
        }
        
        .success-message h3 {
            color: #10b981;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }
        
        .success-message p {
            color: var(--text);
            margin-bottom: 8px;
        }
        
        .success-message p:last-child {
            font-weight: 600;
            color: var(--primary);
        }
    </style>

    <!-- Añadir esto en la sección head -->
    <audio id="alertSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>
    <audio id="reservationSound" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
              <i class="fas fa-gamepad"></i>
              <span>GameHub</span>
            </div>
            <ul class="nav-menu">
              <li class="nav-item">
                <a href="index.html" class="nav-link">
                  <i class="fas fa-chart-line"></i>
                  <span>Dashboard</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="salas.html" class="nav-link active">
                  <i class="fas fa-tv"></i>
                  <span>Salas</span>
                </a>
              </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1 class="page-title">Gestión de Salas</h1>
                <div>
                    <button class="btn btn-primary" id="addConsoleBtn">
                        <i class="fas fa-plus"></i> Añadir Consola
                    </button>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filters-container">
                <div class="filter-group">
                    <span class="filter-label">Filtrar por:</span>
                    <select class="filter-select" id="filterStatus">
                        <option value="all">Todos los estados</option>
                        <option value="available">Disponibles</option>
                        <option value="busy">Ocupadas</option>
                        <option value="reserved">Reservadas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Tipo:</span>
                    <select class="filter-select" id="filterType">
                        <option value="all">Todas las consolas</option>
                        <option value="ps5">PlayStation 5</option>
                        <option value="xbox">Xbox Series X</option>
                        <option value="switch">Nintendo Switch</option>
                        <option value="pc">PC Gaming</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Ordenar por:</span>
                    <select class="filter-select" id="sortBy">
                        <option value="name">Nombre</option>
                        <option value="status">Estado</option>
                        <option value="time">Tiempo restante</option>
                    </select>
                </div>
            </div>

            <!-- Listado de Consolas -->
            <div class="consoles-container" id="consolesContainer">
                <!-- Las consolas se generarán dinámicamente con JavaScript -->
            </div>
        </main>
    </div>

    <!-- Modal para Iniciar Sesión -->
    <div class="modal-overlay" id="sessionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Iniciar Sesión de Juego</h3>
                <button class="modal-close" id="closeSessionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Consola</label>
                    <input type="text" class="form-control" id="modalConsoleName" readonly>
                </div>

                <div class="form-group">
                    <label class="form-label">Nombre del Cliente</label>
                    <input type="text" class="form-control" id="clientName" placeholder="Ingrese nombre del cliente">
                </div>

                <div class="form-group">
                    <label class="form-label">Tiempo de Juego</label>
                    <select class="form-control" id="playTime">
                        <option value="1">1 hora - $15.000</option>
                        <option value="2">2 horas - $28.000</option>
                        <option value="3">3 horas - $40.000</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Productos Adicionales</label>
                    <div class="products-list" id="productsList">
                        <div class="product-item">
                            <div class="product-info">
                                <i class="fas fa-cookie-bite"></i>
                                <span>Papas Margarita</span>
                                <span class="product-price">$5.000</span>
                            </div>
                            <div class="product-quantity">
                                <button class="quantity-btn minus" data-product="chips">-</button>
                                <span class="quantity" data-product="chips">0</span>
                                <button class="quantity-btn plus" data-product="chips">+</button>
                            </div>
                        </div>
                        <div class="product-item">
                            <div class="product-info">
                                <i class="fas fa-wine-bottle"></i>
                                <span>Coca-Cola 400ml</span>
                                <span class="product-price">$3.500</span>
                            </div>
                            <div class="product-quantity">
                                <button class="quantity-btn minus" data-product="soda">-</button>
                                <span class="quantity" data-product="soda">0</span>
                                <button class="quantity-btn plus" data-product="soda">+</button>
                            </div>
                        </div>
                        <div class="product-item">
                            <div class="product-info">
                                <i class="fas fa-gamepad"></i>
                                <span>Control Adicional</span>
                                <span class="product-price">$10.000</span>
                            </div>
                            <div class="product-quantity">
                                <button class="quantity-btn minus" data-product="controller">-</button>
                                <span class="quantity" data-product="controller">0</span>
                                <button class="quantity-btn plus" data-product="controller">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Total a Pagar</label>
                    <input type="text" class="form-control" id="totalAmount" value="$15.000" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelSessionBtn">
                    Cancelar
                </button>
                <button class="btn btn-primary" id="startSessionBtn">
                    <i class="fas fa-play"></i> Iniciar Sesión
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para Añadir Consola -->
    <div class="modal-overlay" id="addConsoleModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Añadir Nueva Consola</h3>
                <button class="modal-close" id="closeAddConsoleModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nombre de la Consola</label>
                    <input type="text" class="form-control" id="consoleName" placeholder="Ej: PS5-03">
                </div>

                <div class="form-group">
                    <label class="form-label">Tipo de Consola</label>
                    <select class="form-control" id="consoleType">
                        <option value="ps5">PlayStation 5</option>
                        <option value="xbox">Xbox Series X</option>
                        <option value="switch">Nintendo Switch</option>
                        <option value="pc">PC Gaming</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Precio por Hora</label>
                    <input type="number" class="form-control" id="hourlyPrice" placeholder="Ej: 15000">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelAddConsoleBtn">
                    Cancelar
                </button>
                <button class="btn btn-primary" id="saveConsoleBtn">
                    <i class="fas fa-save"></i> Guardar Consola
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Resumen/Facturación -->
    <div class="modal-overlay" id="invoiceModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">Resumen del Servicio</h3>
                <button class="modal-close" id="closeInvoiceModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice-header">
                    <div class="invoice-logo">
                        <i class="fas fa-gamepad"></i>
                        <span>GameHub</span>
                    </div>
                    <div class="invoice-info">
                        <div class="info-row">
                            <span class="info-label">Fecha:</span>
                            <span class="info-value" id="invoiceDate"></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Vendedor:</span>
                            <span class="info-value" id="invoiceSeller">Juan Pablo</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Consola:</span>
                            <span class="info-value" id="invoiceConsole"></span>
                        </div>
                    </div>
                </div>
                
                <div class="invoice-details">
                    <div class="details-header">
                        <span>Descripción</span>
                        <span>Valor</span>
                    </div>
                    
                    <div class="details-body" id="invoiceItems">
                        <!-- Los ítems se generan dinámicamente -->
                    </div>
                    
                    <div class="details-footer">
                        <div class="total-row">
                            <span>TOTAL</span>
                            <span id="invoiceTotal">$0</span>
                        </div>
                    </div>
                </div>
                
                <div class="payment-section">
                    <h4>Método de Pago</h4>
                    <div class="payment-methods">
                        <div class="payment-option">
                            <input type="radio" name="paymentMethod" id="cash" value="cash" checked>
                            <label for="cash">Efectivo</label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" name="paymentMethod" id="transfer" value="transfer">
                            <label for="transfer">Transferencia</label>
                        </div>
                        <div class="bank-select" id="bankSelect" style="display: none;">
                            <select class="form-control" id="bank">
                                <option value="nequi">Nequi</option>
                                <option value="daviplata">Daviplata</option>
                                <option value="bancolombia">Bancolombia</option>
                                <option value="bbva">BBVA</option>
                                <option value="davivienda">Davivienda</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" id="cashAmountGroup">
                        <label class="form-label">Monto Recibido</label>
                        <input type="number" class="form-control" id="cashAmount" placeholder="Ingrese monto recibido">
                    </div>
                    
                    <div class="form-group" id="changeAmountGroup" style="display: none;">
                        <label class="form-label">Cambio</label>
                        <input type="text" class="form-control" id="changeAmount" readonly>
                    </div>
                    
                    <div class="form-group" id="referenceGroup" style="display: none;">
                        <label class="form-label">Número de Referencia</label>
                        <input type="text" class="form-control" id="referenceNumber" placeholder="Últimos 4 dígitos">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="printInvoiceBtn">
                    <i class="fas fa-print"></i> Imprimir
                </button>
                <button class="btn btn-primary" id="completePaymentBtn">
                    <i class="fas fa-check-circle"></i> Completar Pago
                </button>
            </div>
        </div>
    </div>

    <script>
        // Datos de ejemplo (en un sistema real vendrían de una API)
        let consoles = [
            { id: 1, name: "PS5-01", type: "ps5", status: "available", hourlyRate: 15000 },
            { id: 2, name: "PS5-02", type: "ps5", status: "busy", client: "Juan Pérez", startTime: "2023-06-15T14:30:00", duration: 2, endTime: "2023-06-15T16:30:00", hourlyRate: 15000 },
            { id: 3, name: "XBOX-01", type: "xbox", status: "reserved", client: "María Gómez", reservationTime: "2023-06-15T18:00:00", hourlyRate: 12000 },
            { id: 4, name: "SWITCH-01", type: "switch", status: "available", hourlyRate: 10000 },
            { id: 5, name: "PC-01", type: "pc", status: "busy", client: "Carlos Ruiz", startTime: "2023-06-15T15:00:00", duration: 3, endTime: "2023-06-15T18:00:00", hourlyRate: 18000 }
        ];

        let products = [
            { id: 1, name: "Papas Margarita", price: 5000, quantity: 0 },
            { id: 2, name: "Coca-Cola 400ml", price: 3500, quantity: 0 },
            { id: 3, name: "Control Adicional", price: 10000, quantity: 0 }
        ];

        // Variables globales
        let currentConsole = null;
        let timers = {};
        let soundEnabled = true;
        let alertedConsoles = new Set();

        // DOM Elements
        const consolesContainer = document.getElementById('consolesContainer');
        const sessionModal = document.getElementById('sessionModal');
        const addConsoleModal = document.getElementById('addConsoleModal');
        const filterStatus = document.getElementById('filterStatus');
        const filterType = document.getElementById('filterType');
        const sortBy = document.getElementById('sortBy');

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            renderConsoles();
            setupEventListeners();
        });

        // Renderizar las consolas
        function renderConsoles() {
            consolesContainer.innerHTML = '';
            
            // Filtrar y ordenar
            let filteredConsoles = [...consoles];
            
            // Aplicar filtros
            if (filterStatus.value !== 'all') {
                filteredConsoles = filteredConsoles.filter(console => console.status === filterStatus.value);
            }
            
            if (filterType.value !== 'all') {
                filteredConsoles = filteredConsoles.filter(console => console.type === filterType.value);
            }
            
            // Aplicar orden
            switch (sortBy.value) {
                case 'name':
                    filteredConsoles.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'status':
                    filteredConsoles.sort((a, b) => a.status.localeCompare(b.status));
                    break;
                case 'time':
                    // Ordenar por tiempo restante (las ocupadas primero)
                    filteredConsoles.sort((a, b) => {
                        if (a.status === 'busy' && b.status !== 'busy') return -1;
                        if (a.status !== 'busy' && b.status === 'busy') return 1;
                        return 0;
                    });
                    break;
            }
            
            // Renderizar cada consola
            filteredConsoles.forEach(console => {
                const consoleCard = createConsoleCard(console);
                consolesContainer.appendChild(consoleCard);
                
                // Iniciar temporizador si la consola está ocupada
                if (console.status === 'busy') {
                    startTimer(console.id, new Date(console.endTime));
                }
            });
        }

        // Crear tarjeta de consola
        function createConsoleCard(consoleData) {
            const card = document.createElement('div');
            card.className = 'console-card';
            card.dataset.id = consoleData.id;
            
            let statusText = '';
            let statusClass = '';
            let timerHTML = '';
            let actionsHTML = '';
            
            switch (consoleData.status) {
                case 'available':
                    statusText = 'Disponible';
                    statusClass = 'status-available';
                    actionsHTML = `
                        <button class="action-btn primary start-session">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                        <button class="action-btn reserve-session">
                            <i class="fas fa-calendar-check"></i> Reservar
                        </button>
                    `;
                    break;
                case 'busy':
                    statusText = 'Ocupada';
                    statusClass = 'status-busy';
                    const remainingTime = calculateRemainingTime(new Date(consoleData.endTime));
                    timerHTML = `
                        <div class="timer-container">
                            <div class="timer-display" id="timer-${consoleData.id}">${formatTime(remainingTime)}</div>
                            <div class="timer-label">Tiempo restante</div>
                        </div>
                    `;
                    actionsHTML = `
                        <button class="action-btn add-products">
                            <i class="fas fa-plus"></i> Productos
                        </button>
                        <button class="action-btn danger end-session">
                            <i class="fas fa-stop"></i> Finalizar
                        </button>
                    `;
                    break;
                case 'reserved':
                    statusText = 'Reservada';
                    statusClass = 'status-reserved';
                    const reservationTime = new Date(consoleData.reservationTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    timerHTML = `
                        <div class="console-info">
                            <span class="info-label">Reserva:</span>
                            <span class="info-value">${reservationTime}</span>
                        </div>
                    `;
                    actionsHTML = `
                        <button class="action-btn cancel-reservation">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button class="action-btn primary start-session">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                    `;
                    break;
            }
            
            let iconClass = '';
            let iconSymbol = '';
            
            switch (consoleData.type) {
                case 'ps5':
                    iconClass = 'ps-icon';
                    iconSymbol = '<i class="fab fa-playstation"></i>';
                    break;
                case 'xbox':
                    iconClass = 'xbox-icon';
                    iconSymbol = '<i class="fab fa-xbox"></i>';
                    break;
                case 'switch':
                    iconClass = 'switch-icon';
                    iconSymbol = '<i class="fas fa-gamepad"></i>';
                    break;
                case 'pc':
                    iconClass = 'pc-icon';
                    iconSymbol = '<i class="fas fa-desktop"></i>';
                    break;
            }
            
            card.innerHTML = `
                <div class="console-header">
                    <div class="console-title">
                        <div class="console-icon ${iconClass}">${iconSymbol}</div>
                        ${consoleData.name}
                    </div>
                    <div class="console-status ${statusClass}">${statusText}</div>
                </div>
                <div class="console-body">
                    <div class="console-info">
                        <span class="info-label">Precio/h:</span>
                        <span class="info-value">$${consoleData.hourlyRate.toLocaleString()}</span>
                    </div>
                    ${consoleData.client ? `
                    <div class="console-info">
                        <span class="info-label">Cliente:</span>
                        <span class="info-value">${consoleData.client}</span>
                    </div>
                    ` : ''}
                    ${timerHTML}
                    <div class="console-actions">
                        ${actionsHTML}
                    </div>
                </div>
            `;
            
            return card;
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Filtros
            filterStatus.addEventListener('change', renderConsoles);
            filterType.addEventListener('change', renderConsoles);
            sortBy.addEventListener('change', renderConsoles);
            
            // Botón añadir consola
            document.getElementById('addConsoleBtn').addEventListener('click', () => {
                document.getElementById('addConsoleModal').classList.add('active');
            });
            
            // Cerrar modales
            document.getElementById('closeSessionModal').addEventListener('click', closeSessionModal);
            document.getElementById('closeAddConsoleModal').addEventListener('click', closeAddConsoleModal);
            document.getElementById('cancelSessionBtn').addEventListener('click', closeSessionModal);
            document.getElementById('cancelAddConsoleBtn').addEventListener('click', closeAddConsoleModal);
            
            // Guardar nueva consola
            document.getElementById('saveConsoleBtn').addEventListener('click', saveNewConsole);
            
            // Delegación de eventos para los botones de las tarjetas
            consolesContainer.addEventListener('click', function(e) {
                const card = e.target.closest('.console-card');
                if (!card) return;
                
                const consoleId = parseInt(card.dataset.id);
                currentConsole = consoles.find(c => c.id === consoleId);
                
                if (e.target.closest('.start-session')) {
                    openSessionModal();
                } else if (e.target.closest('.reserve-session')) {
                    reserveConsole();
                } else if (e.target.closest('.end-session')) {
                    endSession();
                } else if (e.target.closest('.add-products')) {
                    openSessionModal(true);
                } else if (e.target.closest('.cancel-reservation')) {
                    cancelReservation();
                }
            });
            
            // Control de cantidad de productos
            document.querySelectorAll('.quantity-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const product = this.dataset.product;
                    const isPlus = this.classList.contains('plus');
                    const quantityElement = document.querySelector(`.quantity[data-product="${product}"]`);
                    let quantity = parseInt(quantityElement.textContent);
                    
                    if (isPlus) {
                        quantity++;
                    } else if (quantity > 0) {
                        quantity--;
                    }
                    
                    quantityElement.textContent = quantity;
                    updateTotal();
                });
            });
            
            // Cambio en tiempo de juego
            document.getElementById('playTime').addEventListener('change', updateTotal);
            
            // Iniciar sesión
            document.getElementById('startSessionBtn').addEventListener('click', startSession);
        }

        // Abrir modal de sesión
        function openSessionModal(isAddingProducts = false) {
            document.getElementById('modalConsoleName').value = currentConsole.name;
            
            if (isAddingProducts && currentConsole.status === 'busy') {
                document.getElementById('clientName').value = currentConsole.client;
                document.getElementById('clientName').readOnly = true;
                document.getElementById('playTime').value = currentConsole.duration;
                document.getElementById('playTime').disabled = true;
                document.querySelector('.modal-title').textContent = 'Añadir Productos';
                document.getElementById('startSessionBtn').innerHTML = '<i class="fas fa-plus"></i> Añadir Productos';
            } else {
                document.getElementById('clientName').value = '';
                document.getElementById('clientName').readOnly = false;
                document.getElementById('playTime').disabled = false;
                document.querySelector('.modal-title').textContent = 'Iniciar Sesión de Juego';
                document.getElementById('startSessionBtn').innerHTML = '<i class="fas fa-play"></i> Iniciar Sesión';
                
                // Resetear productos
                document.querySelectorAll('.quantity').forEach(el => {
                    el.textContent = '0';
                });
            }
            
            updateTotal();
            sessionModal.classList.add('active');
        }

        // Cerrar modal de sesión
        function closeSessionModal() {
            sessionModal.classList.remove('active');
        }

        // Cerrar modal de añadir consola
        function closeAddConsoleModal() {
            addConsoleModal.classList.remove('active');
        }

        // Actualizar total a pagar
        function updateTotal() {
            const playTime = parseInt(document.getElementById('playTime').value);
            const hourlyRate = currentConsole.hourlyRate;
            let total = playTime * hourlyRate;
            
            // Sumar productos
            document.querySelectorAll('.product-item').forEach(item => {
                const quantity = parseInt(item.querySelector('.quantity').textContent);
                const price = parseInt(item.querySelector('.product-price').textContent.replace(/\D/g, ''));
                total += quantity * price;
            });
            
            document.getElementById('totalAmount').value = `$${total.toLocaleString()}`;
        }

        // Iniciar sesión de juego
        function startSession() {
            const clientName = document.getElementById('clientName').value;
            const playTime = parseInt(document.getElementById('playTime').value);
            
            if (!clientName) {
                alert('Por favor ingrese el nombre del cliente');
                return;
            }
            
            const now = new Date();
            const endTime = new Date(now.getTime() + playTime * 60 * 60 * 1000);
            
            // Actualizar estado de la consola
            currentConsole.status = 'busy';
            currentConsole.client = clientName;
            currentConsole.startTime = now.toISOString();
            currentConsole.duration = playTime;
            currentConsole.endTime = endTime.toISOString();
            
            // Iniciar temporizador
            startTimer(currentConsole.id, endTime);
            
            // Actualizar vista
            renderConsoles();
            closeSessionModal();
            
            // Capturar productos seleccionados
            currentConsole.products = Array.from(document.querySelectorAll('.product-item')).map(item => {
                return {
                    name: item.querySelector('.product-info span').textContent,
                    price: parseInt(item.querySelector('.product-price').textContent.replace(/\D/g, '')),
                    quantity: parseInt(item.querySelector('.quantity').textContent)
                };
            });
            
            // Aquí normalmente enviarías los datos al servidor
            console.log('Sesión iniciada:', currentConsole);
        }

        // Reservar consola
        function reserveConsole() {
            const reservationTime = prompt('Ingrese la hora de reserva (HH:MM):');
            
            if (reservationTime && /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(reservationTime)) {
                const [hours, minutes] = reservationTime.split(':');
                const now = new Date();
                const reservationDate = new Date(
                    now.getFullYear(),
                    now.getMonth(),
                    now.getDate(),
                    hours,
                    minutes
                );
                
                if (reservationDate < now) {
                    alert('La hora de reserva debe ser en el futuro');
                    return;
                }
                
                currentConsole.status = 'reserved';
                currentConsole.reservationTime = reservationDate.toISOString();
                currentConsole.client = prompt('Nombre del cliente:');
                
                if (!currentConsole.client) {
                    alert('Debe ingresar un nombre de cliente');
                    return;
                }
                
                renderConsoles();
                console.log('Consola reservada:', currentConsole);
            } else {
                alert('Formato de hora inválido. Use HH:MM (24 horas)');
            }
        }

        // Cancelar reserva
        function cancelReservation() {
            if (confirm('¿Cancelar esta reserva?')) {
                currentConsole.status = 'available';
                delete currentConsole.reservationTime;
                delete currentConsole.client;
                renderConsoles();
            }
        }

        // Finalizar sesión
        function endSession() {
            if (confirm(`¿Finalizar sesión en ${currentConsole.name}?`)) {
                clearInterval(timers[currentConsole.id]);
                delete timers[currentConsole.id];
                
                // Calcular total
                const total = calculateSessionTotal(currentConsole);
                
                // Mostrar modal de facturación
                showInvoiceModal(currentConsole, total);
            }
        }

        // Calcular total de la sesión
        function calculateSessionTotal(consoleData) {
            let total = consoleData.duration * consoleData.hourlyRate;
            
            if(consoleData.products) {
                total += consoleData.products.reduce((sum, product) => {
                    return sum + (product.quantity * product.price);
                }, 0);
            }
            
            return total;
        }

        // Iniciar temporizador
        function startTimer(consoleId, endTime) {
            // Limpiar temporizador existente si hay uno
            if (timers[consoleId]) {
                clearInterval(timers[consoleId]);
            }
            
            // Actualizar inmediatamente
            updateTimerDisplay(consoleId, endTime);
            
            // Configurar intervalo para actualizar cada segundo
            timers[consoleId] = setInterval(() => {
                updateTimerDisplay(consoleId, endTime);
            }, 1000);
        }

        // Actualizar display del temporizador
        function updateTimerDisplay(consoleId, endTime) {
            const timerElement = document.getElementById(`timer-${consoleId}`);
            if (!timerElement) return;
            
            const remaining = calculateRemainingTime(endTime);
            
            if (remaining <= 0) {
                timerElement.textContent = '00:00:00';
                clearInterval(timers[consoleId]);
                if(soundEnabled) document.getElementById('alertSound').play();
                alertedConsoles.delete(consoleId);
            } else {
                timerElement.textContent = formatTime(remaining);
                
                // Alerta 5 minutos antes
                if (remaining <= 300 && !alertedConsoles.has(consoleId)) {
                    if(soundEnabled) {
                        document.getElementById('alertSound').play();
                        alertedConsoles.add(consoleId);
                    }
                }
            }
        }

        // Calcular tiempo restante
        function calculateRemainingTime(endTime) {
            const now = new Date();
            const end = new Date(endTime);
            return Math.max(0, Math.floor((end - now) / 1000)); // en segundos
        }

        // Formatear tiempo (HH:MM:SS)
        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            
            return [
                hours.toString().padStart(2, '0'),
                minutes.toString().padStart(2, '0'),
                seconds.toString().padStart(2, '0')
            ].join(':');
        }

        // Guardar nueva consola
        function saveNewConsole() {
            const name = document.getElementById('consoleName').value.trim();
            const type = document.getElementById('consoleType').value;
            const hourlyPrice = parseInt(document.getElementById('hourlyPrice').value);
            
            if (!name) {
                alert('Ingrese un nombre para la consola');
                return;
            }
            
            if (isNaN(hourlyPrice) || hourlyPrice <= 0) {
                alert('Ingrese un precio por hora válido');
                return;
            }
            
            // Crear nueva consola
            const newConsole = {
                id: consoles.length > 0 ? Math.max(...consoles.map(c => c.id)) + 1 : 1,
                name,
                type,
                status: 'available',
                hourlyRate: hourlyPrice
            };
            
            consoles.push(newConsole);
            renderConsoles();
            closeAddConsoleModal();
            
            // Limpiar formulario
            document.getElementById('consoleName').value = '';
            document.getElementById('hourlyPrice').value = '';
        }

        document.querySelector('.search-bar input').addEventListener('input', function(e) {
            const search = e.target.value.toLowerCase();
            document.querySelectorAll('.room-card').forEach(card => {
                const name = card.querySelector('.room-name').textContent.toLowerCase();
                card.style.display = name.includes(search) ? '' : 'none';
            });
        });

        // Mostrar modal de facturación
        function showInvoiceModal(consoleData, total) {
            const now = new Date();
            const startTime = new Date(consoleData.startTime);
            
            // Configurar información básica
            document.getElementById('invoiceDate').textContent = now.toLocaleDateString() + ' ' + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('invoiceConsole').textContent = consoleData.name;
            
            // Generar ítems de la factura
            const itemsContainer = document.getElementById('invoiceItems');
            itemsContainer.innerHTML = '';
            
            // Tiempo de juego
            addInvoiceItem(itemsContainer, `Tiempo de juego (${consoleData.duration} hrs)`, consoleData.duration * consoleData.hourlyRate);
            
            // Productos adicionales
            if(consoleData.products) {
                consoleData.products.forEach(product => {
                    if(product.quantity > 0) {
                        addInvoiceItem(itemsContainer, 
                            `${product.name} (${product.quantity}x)`, 
                            product.quantity * product.price
                        );
                    }
                });
            }
            
            // Actualizar total
            document.getElementById('invoiceTotal').textContent = `$${total.toLocaleString()}`;
            
            // Mostrar modal
            document.getElementById('invoiceModal').classList.add('active');
            
            // Configurar eventos para métodos de pago
            setupPaymentEvents(total);
        }

        // Añadir ítem a la factura
        function addInvoiceItem(container, description, amount) {
            const item = document.createElement('div');
            item.className = 'detail-item';
            item.innerHTML = `
                <span>${description}</span>
                <span>$${amount.toLocaleString()}</span>
            `;
            container.appendChild(item);
        }

        // Configurar eventos para métodos de pago
        function setupPaymentEvents(total) {
            const cashPayment = document.getElementById('cash');
            const transferPayment = document.getElementById('transfer');
            const bankSelect = document.getElementById('bankSelect');
            const cashAmountGroup = document.getElementById('cashAmountGroup');
            const changeAmountGroup = document.getElementById('changeAmountGroup');
            const referenceGroup = document.getElementById('referenceGroup');
            const cashAmount = document.getElementById('cashAmount');
            const changeAmount = document.getElementById('changeAmount');
            
            // Cambio entre efectivo/transferencia
            cashPayment.addEventListener('change', () => {
                bankSelect.style.display = 'none';
                referenceGroup.style.display = 'none';
                cashAmountGroup.style.display = 'block';
                changeAmountGroup.style.display = 'none';
            });
            
            transferPayment.addEventListener('change', () => {
                bankSelect.style.display = 'block';
                referenceGroup.style.display = 'block';
                cashAmountGroup.style.display = 'none';
                changeAmountGroup.style.display = 'none';
            });
            
            // Calcular cambio cuando se ingresa monto
            cashAmount.addEventListener('input', () => {
                const received = parseFloat(cashAmount.value) || 0;
                if (received >= total) {
                    changeAmount.value = `$${(received - total).toLocaleString()}`;
                    changeAmountGroup.style.display = 'block';
                } else {
                    changeAmountGroup.style.display = 'none';
                }
            });
            
            // Completar pago
            document.getElementById('completePaymentBtn').addEventListener('click', () => {
                completePayment(total);
            });
        }

        // Completar proceso de pago
        function completePayment(total) {
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            let paymentDetails = {};
            
            if (paymentMethod === 'cash') {
                const received = parseFloat(document.getElementById('cashAmount').value) || 0;
                if (received < total) {
                    alert('El monto recibido es menor al total');
                    return;
                }
                paymentDetails = {
                    method: 'cash',
                    received: received,
                    change: received - total
                };
            } else {
                const bank = document.getElementById('bank').value;
                const reference = document.getElementById('referenceNumber').value.trim();
                
                if (!reference) {
                    alert('Ingrese el número de referencia');
                    return;
                }
                
                paymentDetails = {
                    method: 'transfer',
                    bank: bank,
                    reference: reference
                };
            }
            
            // Aquí normalmente enviarías los datos al servidor
            console.log('Pago completado:', paymentDetails);
            
            // Mostrar mensaje de éxito
            showSuccessMessage();
        }

        // Mostrar mensaje de éxito
        function showSuccessMessage() {
            const modalBody = document.querySelector('#invoiceModal .modal-body');
            modalBody.innerHTML = `
                <div class="success-message" style="display: block;">
                    <i class="fas fa-check-circle"></i>
                    <h3>¡Registro Exitoso!</h3>
                    <p>La transacción ha sido registrada correctamente.</p>
                    <p>Ticket #${Math.floor(1000 + Math.random() * 9000)}</p>
                </div>
            `;
            
            document.querySelector('#invoiceModal .modal-footer').style.display = 'none';
            
            // Cerrar automáticamente después de 3 segundos
            setTimeout(() => {
                document.getElementById('invoiceModal').classList.remove('active');
                
                // Resetear consola
                currentConsole.status = 'available';
                delete currentConsole.client;
                delete currentConsole.startTime;
                delete currentConsole.endTime;
                delete currentConsole.duration;
                
                renderConsoles();
                
                // Resetear modal para próxima vez
                resetInvoiceModal();
            }, 3000);
        }

        // Resetear modal de facturación
        function resetInvoiceModal() {
            const modalBody = document.querySelector('#invoiceModal .modal-body');
            modalBody.innerHTML = `
                <div class="invoice-header">
                    <div class="invoice-logo">
                        <i class="fas fa-gamepad"></i>
                        <span>GameHub</span>
                    </div>
                    <div class="invoice-info">
                        <div class="info-row">
                            <span class="info-label">Fecha:</span>
                            <span class="info-value" id="invoiceDate"></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Vendedor:</span>
                            <span class="info-value" id="invoiceSeller">Juan Pablo</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Consola:</span>
                            <span class="info-value" id="invoiceConsole"></span>
                        </div>
                    </div>
                </div>
                
                <div class="invoice-details">
                    <div class="details-header">
                        <span>Descripción</span>
                        <span>Valor</span>
                    </div>
                    
                    <div class="details-body" id="invoiceItems">
                        <!-- Los ítems se generan dinámicamente -->
                    </div>
                    
                    <div class="details-footer">
                        <div class="total-row">
                            <span>TOTAL</span>
                            <span id="invoiceTotal">$0</span>
                        </div>
                    </div>
                </div>
                
                <div class="payment-section">
                    <h4>Método de Pago</h4>
                    <div class="payment-methods">
                        <div class="payment-option">
                            <input type="radio" name="paymentMethod" id="cash" value="cash" checked>
                            <label for="cash">Efectivo</label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" name="paymentMethod" id="transfer" value="transfer">
                            <label for="transfer">Transferencia</label>
                        </div>
                        <div class="bank-select" id="bankSelect" style="display: none;">
                            <select class="form-control" id="bank">
                                <option value="nequi">Nequi</option>
                                <option value="daviplata">Daviplata</option>
                                <option value="bancolombia">Bancolombia</option>
                                <option value="bbva">BBVA</option>
                                <option value="davivienda">Davivienda</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" id="cashAmountGroup">
                        <label class="form-label">Monto Recibido</label>
                        <input type="number" class="form-control" id="cashAmount" placeholder="Ingrese monto recibido">
                    </div>
                    
                    <div class="form-group" id="changeAmountGroup" style="display: none;">
                        <label class="form-label">Cambio</label>
                        <input type="text" class="form-control" id="changeAmount" readonly>
                    </div>
                    
                    <div class="form-group" id="referenceGroup" style="display: none;">
                        <label class="form-label">Número de Referencia</label>
                        <input type="text" class="form-control" id="referenceNumber" placeholder="Últimos 4 dígitos">
                    </div>
                </div>
            `;
            
            document.querySelector('#invoiceModal .modal-footer').style.display = 'flex';
        }

        // Modificar la función checkReservations (nueva función)
        function checkReservations() {
            const now = new Date();
            consoles.forEach(console => {
                if(console.status === 'reserved' && console.reservationTime) {
                    const reservationTime = new Date(console.reservationTime);
                    const timeDiff = reservationTime - now;
                    
                    if(timeDiff > 0 && timeDiff <= 300000 && !console.notified) { // 5 minutos antes
                        if(soundEnabled) document.getElementById('reservationSound').play();
                        console.notified = true;
                        alert(`Reserva próxima: ${console.name} a las ${reservationTime.toLocaleTimeString()}`);
                    }
                }
            });
        }

        // Iniciar el chequeo de reservas cada minuto
        setInterval(checkReservations, 60000);

        // Añadir control de sonido en el header
        document.addEventListener('DOMContentLoaded', function() {
            const soundControl = document.createElement('div');
            soundControl.innerHTML = `
                <button class="btn btn-icon" id="soundToggle">
                    <i class="fas fa-volume-up"></i>
                </button>
            `;
            document.querySelector('.header').appendChild(soundControl);
            
            document.getElementById('soundToggle').addEventListener('click', function() {
                soundEnabled = !soundEnabled;
                this.querySelector('i').classList.toggle('fa-volume-up', soundEnabled);
                this.querySelector('i').classList.toggle('fa-volume-mute', !soundEnabled);
            });
        });
    </script>
</body>
</html>